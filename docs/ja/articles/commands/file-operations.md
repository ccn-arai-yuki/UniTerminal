# ファイル操作

ファイルとディレクトリを操作するためのコマンドです。

## pwd

現在の作業ディレクトリを表示します。

### 書式

```bash
pwd [-L|-P]
```

### 説明

現在の作業ディレクトリの絶対パスを表示します。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-L` | `--logical` | 論理パスを表示（デフォルト）。シンボリックリンク名を含むパスを使用。 |
| `-P` | `--physical` | シンボリックリンクを解決した物理パスを表示。 |

### 使用例

```bash
# 現在のディレクトリを表示
pwd
# 出力: /Users/player/Projects/MyGame

# 物理パスを表示（シンボリックリンク解決）
pwd -P
# 出力: /Users/player/Projects/MyGame
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功 |
| 2 | 現在のディレクトリが存在しないか、アクセス権限がない |

---

## cd

作業ディレクトリを変更します。

### 書式

```bash
cd [-L|-P] [directory]
cd -
```

### 説明

現在の作業ディレクトリを指定されたパスに変更します。引数なしの場合、ホームディレクトリに移動します。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-L` | `--logical` | シンボリックリンクをたどる（デフォルト） |
| `-P` | `--physical` | シンボリックリンクを解決して物理ディレクトリ構造を使用 |

### 引数

| 引数 | 説明 |
|----------|------|
| `directory` | 移動先のディレクトリパス。`~` でホームディレクトリを指定可能。 |
| `-` | 前のディレクトリに移動（`cd $OLDPWD` と同等） |

### 使用例

```bash
# ホームディレクトリに移動
cd

# 特定のディレクトリに移動
cd /Users/player/Projects

# 親ディレクトリに移動
cd ..

# ホームディレクトリ省略記法を使用
cd ~/Documents

# 前のディレクトリに移動
cd -
# 出力: /previous/path

# 物理パスを使用
cd -P /symlinked/path
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功 |
| 1 | 引数が多すぎる |
| 2 | ディレクトリが見つからない、ディレクトリではない、またはアクセス権限がない |

---

## ls

ディレクトリの内容を一覧表示します。

### 書式

```bash
ls [-a] [-l] [-h] [-r] [-R] [-S <sort>] [path...]
```

### 説明

ファイルとディレクトリの情報を一覧表示します。デフォルトでは現在のディレクトリの内容を表示します。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-a` | `--all` | `.` で始まるエントリ（隠しファイル）も表示 |
| `-l` | `--long` | 詳細情報付きの長形式で表示 |
| `-h` | `--human-readable` | サイズを人間が読みやすい形式で表示（例: 1K, 234M） |
| `-r` | `--reverse` | ソート順を逆にする |
| `-R` | `--recursive` | サブディレクトリを再帰的に表示 |
| `-S` | `--sort` | ソート基準: `name`（デフォルト）, `size`, `time` |

### 引数

| 引数 | 説明 |
|----------|------|
| `path` | 表示するファイルまたはディレクトリ。複数指定可能。 |

### 出力形式

**通常形式:**
```
file1.txt  file2.txt  folder/
```

**長形式 (`-l`):**
```
-rw-rw-rw-  1      1234  2025-01-15 10:30  file.txt
drwxrwxrwx  2         0  2025-01-15 09:00  folder/
```

フィールド: パーミッション、リンク数、サイズ、日時、名前

### 使用例

```bash
# 現在のディレクトリを表示
ls

# 詳細情報付きで表示
ls -l

# 隠しファイルを含めて表示
ls -a

# 人間が読みやすいサイズで表示
ls -lh

# サイズ順でソート（大きい順）
ls -l -S size

# 更新日時順でソート
ls -l -S time

# ソート順を逆にする
ls -lr

# 再帰的に表示
ls -R

# 特定のディレクトリを表示
ls /path/to/directory

# 複数パスを表示
ls file1.txt folder/
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功 |
| 2 | ファイルまたはディレクトリが見つからない、またはアクセス権限がない |

---

## cat

ファイルの内容を連結して表示します。

### 書式

```bash
cat [file...]
```

### 説明

ファイルを順番に読み取り、標準出力に書き出します。ファイルが指定されていない場合は、標準入力から読み取ります。

### 引数

| 引数 | 説明 |
|----------|------|
| `file` | 表示する1つ以上のファイル。省略時は標準入力から読み取り。 |

### 使用例

```bash
# ファイル内容を表示
cat file.txt

# 複数ファイルを表示
cat file1.txt file2.txt

# パイプラインで使用（パススルー）
echo "Hello" | cat

# ファイルにリダイレクト
cat source.txt > destination.txt

# ファイルを結合
cat header.txt body.txt footer.txt > complete.txt
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功 |
| 2 | ファイルが見つからない、または読み取りエラー |

---

## find

ディレクトリ階層内でファイルを検索します。

### 書式

```bash
find [path...] [-n pattern] [-i pattern] [-t type] [-d depth] [--mindepth N]
```

### 説明

ディレクトリツリー内で指定された条件に一致するファイルを検索します。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-n` | `--name` | ファイル名パターン（`*` と `?` ワイルドカード対応） |
| `-i` | `--iname` | 大文字小文字を区別しないファイル名パターン |
| `-t` | `--type` | ファイルタイプ: `f`（ファイル）, `d`（ディレクトリ） |
| `-d` | `--maxdepth` | 最大検索深度（-1 = 無制限、デフォルト） |
| | `--mindepth` | 最小検索深度（デフォルト: 0） |

### 引数

| 引数 | 説明 |
|----------|------|
| `path` | 検索開始ディレクトリ。デフォルトは現在のディレクトリ。 |

### ワイルドカード

| パターン | 説明 |
|---------|------|
| `*` | 任意の文字列にマッチ |
| `?` | 任意の1文字にマッチ |

### 使用例

```bash
# 現在のディレクトリツリー内のすべてのファイルを検索
find

# 名前パターンで検索
find -n "*.cs"
find -n "Player*"

# 大文字小文字を区別しない検索
find -i "readme*"

# ファイルのみ検索
find -t f

# ディレクトリのみ検索
find -t d

# 検索深度を制限
find -d 2

# オプションを組み合わせ
find /path/to/search -n "*.txt" -t f -d 3

# 特定のディレクトリ内を検索
find Assets/Scripts -n "*.cs"
```

### 出力

検索ディレクトリからの相対パスで一致するパスを出力します:
```
./file.txt
./subfolder/another.txt
./subfolder/deep/file.txt
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功（一致なしの場合も含む） |
| 2 | 開始パスが見つからない |

---

## less

ファイル内容をページ単位で表示します。

### 書式

```bash
less [-n lines] [-f line] [-N] [-S] [file]
```

### 説明

ページネーションをサポートしてファイル内容を表示します。UniTerminalの非対話的環境では、指定された行数を出力します。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-n` | `--lines` | 表示する行数（0 = 全行、デフォルト） |
| `-f` | `--from-line` | 指定行から開始（1ベース、デフォルト: 1） |
| `-N` | `--line-numbers` | 行番号を表示 |
| `-S` | `--chop-long-lines` | 長い行を80文字で切り詰め |

### 引数

| 引数 | 説明 |
|----------|------|
| `file` | 表示するファイル。`-` で標準入力。省略時は標準入力から読み取り。 |

### 使用例

```bash
# ファイル全体を表示
less file.txt

# 先頭20行を表示
less -n 20 file.txt

# 50〜70行を表示
less -f 50 -n 20 file.txt

# 行番号付きで表示
less -N file.txt

# 長い行を切り詰め
less -S logfile.txt

# 標準入力から表示
cat file.txt | less -n 10

# オプションを組み合わせ
less -N -n 50 -f 100 largefile.txt
```

### `-n` オプション使用時の出力

```
File: example.txt (lines 1-20 of 150)
----------------------------------------
Line 1 content
Line 2 content
...
----------------------------------------
(130 more lines)
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功 |
| 2 | ファイルが見つからない、ディレクトリである、またはアクセス権限がない |

---

## diff

ファイルを行単位で比較します。

### 書式

```bash
diff [-u N] [-i] [-b] [-w] [-q] <file1> <file2>
```

### 説明

2つのファイルを比較し、差分を表示します。LCS（最長共通部分列）アルゴリズムを使用。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-u` | `--unified` | N行のコンテキストを含むunified形式で出力 |
| `-i` | `--ignore-case` | ファイル内容の大文字小文字の違いを無視 |
| `-b` | `--ignore-space` | 空白の量の変化を無視 |
| `-w` | `--ignore-all-space` | すべての空白を無視 |
| `-q` | `--brief` | ファイルが異なるかどうかのみを報告 |

### 引数

| 引数 | 説明 |
|----------|------|
| `file1` | 比較する最初のファイル。`-` で標準入力。 |
| `file2` | 比較する2番目のファイル。`-` で標準入力。 |

### 出力形式

**通常形式（デフォルト）:**
```
2c2
< old line
---
> new line
5a6
> added line
8d7
< deleted line
```

**unified形式 (`-u`):**
```
--- file1.txt
+++ file2.txt
@@ -1,5 +1,6 @@
 context line
-removed line
+added line
 context line
```

### 使用例

```bash
# 2つのファイルを比較
diff file1.txt file2.txt

# 3行のコンテキスト付きunified形式
diff -u 3 file1.txt file2.txt

# 大文字小文字を無視
diff -i file1.txt file2.txt

# 空白の変更を無視
diff -w file1.txt file2.txt

# 簡潔な出力
diff -q file1.txt file2.txt
# 出力: Files file1.txt and file2.txt differ

# 標準入力と比較
cat modified.txt | diff original.txt -
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | ファイルが同一 |
| 1 | ファイルが異なる |
| 2 | エラー（ファイルが見つからないなど） |

---

## head

ファイルの先頭部分を表示します。

### 書式

```bash
head [-n lines] [-c bytes] [-q] [-v] [file...]
```

### 説明

各ファイルの先頭部分を標準出力に表示します。デフォルトでは先頭10行を表示します。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-n` | `--lines` | 先頭から表示する行数。負の値は末尾からN行を除いた全行を表示。 |
| `-c` | `--bytes` | 先頭から表示するバイト数。 |
| `-q` | `--quiet` | ファイルヘッダーを表示しない |
| `-v` | `--verbose` | ファイルヘッダーを常に表示 |

### 引数

| 引数 | 説明 |
|----------|------|
| `file` | 表示する1つ以上のファイル。省略時は標準入力から読み取り。 |

### 使用例

```bash
# デフォルト（先頭10行）
head myfile.txt

# 行数を指定
head -n 5 myfile.txt

# 末尾を除く全行（末尾2行を除く）
head -n -2 myfile.txt

# バイト数を指定
head -c 100 myfile.txt

# 複数ファイル
head file1.txt file2.txt

# ヘッダーを常に表示
head -v myfile.txt

# ヘッダーを非表示
head -q file1.txt file2.txt
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功 |
| 2 | ファイルが見つからない、または読み取りエラー |

---

## tail

ファイルの末尾部分を表示します。

### 書式

```bash
tail [-n lines] [-c bytes] [-f] [-q] [-v] [file...]
```

### 説明

各ファイルの末尾部分を標準出力に表示します。デフォルトでは末尾10行を表示します。

### オプション

| オプション | ロング形式 | 説明 |
|--------|------|------|
| `-n` | `--lines` | 末尾から表示する行数。`+N` で先頭からN行目以降を表示。 |
| `-c` | `--bytes` | 末尾から表示するバイト数。 |
| `-f` | `--follow` | ファイルの追加内容をリアルタイムで表示（Ctrl+Cで停止） |
| `-q` | `--quiet` | ファイルヘッダーを表示しない |
| `-v` | `--verbose` | ファイルヘッダーを常に表示 |

### 引数

| 引数 | 説明 |
|----------|------|
| `file` | 表示する1つ以上のファイル。省略時は標準入力から読み取り。 |

### 使用例

```bash
# デフォルト（末尾10行）
tail myfile.txt

# 行数を指定
tail -n 5 myfile.txt

# 先頭から（3行目以降を表示）
tail -n +3 myfile.txt

# バイト数を指定
tail -c 100 myfile.txt

# リアルタイム監視（Ctrl+Cで停止）
tail -f logfile.txt

# 複数ファイル
tail file1.txt file2.txt
```

### 終了コード

| コード | 説明 |
|------|------|
| 0 | 成功 |
| 2 | ファイルが見つからない、または読み取りエラー |
